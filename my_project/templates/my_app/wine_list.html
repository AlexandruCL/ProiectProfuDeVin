<!DOCTYPE html>
<html>
<head>
    <title>Wine List</title>
</head>
<body>
    <a href="{% url 'product_list' %}">Back to Product List</a>
    <h1>Wine List</h1>

    <!-- Filter Form -->
    <form method="get" action="">
        <label for="year">Filter by Year:</label>
        <input type="number" id="year" name="year" min="1900" max="2100">
        <button type="submit">Filter</button>
    </form>
    <a href="{%url 'wine_list' %}"> RESET FILTERS</a>
    
    <ul>
        {% for wine in wines %}
            <li>
                {% if user.is_authenticated %}
                    <h2>{{ wine.Name }}</h2>
                    <p>Type: {{wine.Type}}</p>
                    <p>Year: {{ wine.Year }}</p>
                    <p>Grapes: {{ wine.Grapes }}</p>
                    <p>Country: {{ wine.Country }}</p>
                    <p>Region: {{ wine.Region }}</p>
                    <p>Description: {{ wine.Description }}</p>
                    <p>Quantity available: {{ wine.Qty }} bottles</p>
                    <p>Price: {{ wine.Price }} RON</p>
                    <form action="{% url 'add_to_cart' 'wine' wine.ID %}" method="post">
                        {% csrf_token %}
                        <label for="quantity">Quantity to order:</label>
                        <input type="number" id="quantity" name="quantity" min="1" value="1">
                        <button type="submit">Add to Cart</button>
                    </form>
                {% else %}
                    <h2>{{ wine.Name }}</h2>
                    <p>Type: {{wine.Type}}</p>
                    <p>Year: {{ wine.Year }}</p>
                    <p>Grapes: {{ wine.Grapes }}</p>
                    <p>Country: {{ wine.Country }}</p>
                    <p>Region: {{ wine.Region }}</p>
                    <p>Description: {{ wine.Description }}</p>
                    <p>Quantity available: {{ wine.Qty }} bottles</p>
                    <p>Price: {{ wine.Price }} RON</p>
                    <p>Log in to add to cart</p>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</body>
</html>